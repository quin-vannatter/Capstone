!function(t){function n(t,n){this.canvas=t,this.camera=n,this.inputMapping={up:"KeyW",down:"KeyS",left:"KeyA",right:"KeyD",shoot:1,focus:2,teleport:3},this.input={},this.oldInput={},this.cursor={x:0,y:0};for(var i in this.inputMapping)this.inputMapping.hasOwnProperty(i)&&(this.input[i]=!1,this.oldInput[i]=!1);var p=this;document.addEventListener("mousedown",function(t){t.preventDefault(),p.handleInput.call(p,t)}),document.addEventListener("mouseup",function(t){p.handleInput.call(p,t)}),document.addEventListener("keydown",function(t){p.handleInput.call(p,t)}),document.addEventListener("keyup",function(t){p.handleInput.call(p,t)})}n.prototype.handleInput=function(t){for(var n in this.inputMapping)if(this.inputMapping.hasOwnProperty(n))switch(t.type){case"keydown":case"keyup":t.code===this.inputMapping[n]&&(this.input[n]="keydown"===t.type);break;case"mousedown":case"mouseup":t.which===this.inputMapping[n]&&(this.input[n]="mousedown"===t.type);var i=this.canvas.getBoundingClientRect(),p=this.camera.getLoc();this.cursor={x:t.clientX-i.left+p.x,y:t.clientY-i.top+p.y}}},n.prototype.getInput=function(){var t={};for(var n in this.input)this.input.hasOwnProperty(n)&&(t[n]=this.input[n]);return t},n.prototype.getOldInput=function(){var t={};for(var n in this.oldInput)this.oldInput.hasOwnProperty(n)&&(t[n]=this.oldInput[n]);return t},n.prototype.getChanges=function(){var t={},n=!1;for(var i in this.inputMapping)this.inputMapping.hasOwnProperty(i)&&this.oldInput[i]!=this.input[i]&&(t[i]=this.input[i],n=!0);return{mapping:t,changed:n}},n.getEmptyInput=function(){var t={};for(var n in this.inputMapping)this.inputMapping.hasOwnProperty(n)&&(t[n]=!1);return t},n.prototype.getCursor=function(){return this.cursor},n.prototype.updateOld=function(){for(var t in this.input)this.input.hasOwnProperty(t)&&(this.oldInput[t]=this.input[t])},t.Input=n}(window);